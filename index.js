const writeFile = require('write')
const prompts = require('prompts');
const questions = [
    {
        type: 'number',
        name: 'backgroundRed',
        message: 'Background Red:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'backgroundBlue',
        message: 'Background Blue:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'backgroundGreen',
        message: 'Background Green:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'foregroundRed',
        message: 'Foreground Red:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'foregroundBlue',
        message: 'Foreground Blue:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'foregroundGreen',
        message: 'Foreground Green:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'primaryRed',
        message: 'Primary Red:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'primaryBlue',
        message: 'Primary Blue:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'primaryGreen',
        message: 'Primary Green:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'secondaryRed',
        message: 'Secondary Red:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'secondaryGreen',
        message: 'Secondary Green:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'secondaryBlue',
        message: 'Secondary Blue:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'flashRed',
        message: 'Flash Red:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'flashGreen',
        message: 'Flash Green:',
        initial: '0'
    },
    {
        type: 'number',
        name: 'flashBlue',
        message: 'Flash Blue:',
        initial: '0'
    },
    {
        type: 'text',
        name: 'path',
        message: 'What folder do you want to put theme.css?',
        initial: 'static'
    }
]

const colors = ['background', 'foreground', 'primary', 'secondary', 'flash'];

(async () => {
    const results = await prompts(questions)
    var string = '';

    // Loop through the numbers and colors
    for (let num = 1; num <= 100; num++) {
        colors.forEach(color => {
            string += `--${color}-${num}:rgba(${results[`${color}Red`]}, ${results[`${color}Blue`]}, ${results[`${color}Green`]}, ${num / 100});`;
        })
    }

    // Finish off with the norm
    var normal = '';
    colors.forEach(color => {
        normal += `--${color}:rgba(${results[`${color}Red`]}, ${results[`${color}Blue`]}, ${results[`${color}Green`]});`;
    })

    // Write it to the file
    const data =
        `/*CSS Generated by theme-gen (https://github.com/Gninoskcaj/theme-gen) :)*/\n:root {${string}${normal}}`

    await writeFile(`${results.path}/theme.css`, data)
})();